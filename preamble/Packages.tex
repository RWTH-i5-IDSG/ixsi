%----------------------------------------------------------
%---- Packages --------------------------------------------
%----------------------------------------------------------



%---- Have to be loaded at first---------------------------
\usepackage{texmf/commandsrwth}
\usepackage{etex}
\usepackage{ifthen}
\usepackage{ifpdf}
\usepackage{xspace}
\usepackage{ragged2e}
\usepackage{epsfig}
% \usepackage{subfigure}
\usepackage{datetime}
\usepackage{calc}
\usepackage{pslatex}
\usepackage{lineno}
\usepackage{scrhack}
%---- Coding, Language, Fonts, and Symbols ----------------
\usepackage{babel}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{textcomp}
\usepackage{eurosym}
\usepackage[expansion=false]{microtype}

%---- Mathematic ------------------------------------------
% \usepackage{amsmath}
% \usepackage{amssymb}
% \usepackage{amsfonts}
% \usepackage{amstext}
% \usepackage{amsthm}
\usepackage{thmtools}
% \usepackage[all]{onlyamsmath}
\usepackage{latexsym}
\usepackage{stmaryrd}
\usepackage{mathtools}
\usepackage{fixmath}
\usepackage{icomma}

%---- Scientific ------------------------------------------
\usepackage{listings}
\usepackage{bytefield}
\usepackage[
separate-uncertainty,
multi-part-units=repeat,
product-units=repeat,
per-mode=symbol-or-fraction,
]
{siunitx}

%---- Text and Layout -------------------------------------
\usepackage[
babel,
threshold=2,
strict
]{csquotes}
\usepackage{upquote}
\usepackage{varwidth}
\usepackage{multicol}


% \usepackage{enumitem}
% within paragraphs
\usepackage[svgnames,table]{xcolor}


%---- Floats - Tables, Figures ----------------------------

\usepackage{graphicx}
\usepackage{array}
\usepackage{tabularx}
\usepackage{booktabs}
\usepackage{multirow}
\usepackage{floatrow}
\floatsetup[widefigure]{}
\usepackage{longtable}
\usepackage{rotating}
\usepackage{dcolumn}
\usepackage{float}
\floatstyle{plaintop}
\restylefloat{table}

% tikz styles
\usepackage[underline=false,rounded corners=false]{texmf/pgf-umlsd} % for interactions graphs
\usepackage{texmf/tikz-er2}
\tikzstyle{circleTX} = [draw, circle, minimum height=1.2cm, node
distance=3cm]
  \tikzstyle{rectangleTX} = [draw, rectangle, minimum height=1.2cm, node
distance=3cm]
% flafter forces float to be placed after referenced
% \usepackage{flafter} 

%  fancy captions (use default for insticc)
% \usepackage[small,hang]{caption}

%table caption on top
\usepackage[small]{caption}

\usepackage[
caption=false,
]{subfig}

\graphicspath{{./graphics/}}

% remove identation
% \usepackage{parskip}

% permissive float placement
\setcounter{topnumber}{4}
\setcounter{bottomnumber}{4}
\setcounter{totalnumber}{10}
\renewcommand{\textfraction}{0.15}
\renewcommand{\topfraction}{0.85}
\renewcommand{\bottomfraction}{0.70}
\renewcommand{\floatpagefraction}{0.66}




%---- hyperref --------------------------------------------
\usepackage[
%   draft,
%   final,
breaklinks=true,
linktocpage=true,
hyperfootnotes=true,
%   pagebackref=true,
plainpages=false,
naturalnames=true,
pageanchor=true,
bookmarks=true,
%   hidelinks,
colorlinks=false,
linkcolor=blue,
urlcolor=blue,
citecolor=blue,
bookmarks=true,
bookmarksnumbered=true,
pdfpagemode=UseOutlines,
pdfpagelabels=true,
pdfencoding=auto,
%  psdextra,
pdfstartview={FitH},
unicode
]{hyperref}

\usepackage{cleveref}

% not usefull for pdflatex
%\usepackage[hyphenbreaks]{breakurl}

%---- glossaries ------------------------------------------
\usepackage[
  acronym,
  shortcuts,
  style=super,
  description,
  nonumberlist
]{glossaries}
\renewcommand*{\glspostdescription}{}

\usepackage{makeidx}

%----------------------------------------------------------
%---- Settings --------------------------------------------
%----------------------------------------------------------


    
%--- hyperref meta data -----------------------------------
\hypersetup{%
%   pdfauthor={\author},
% %   pdfkeywords={\thiskeywords},
%   pdftitle={\title},
}





%---- listings --------------------------------------------
\lstset{%
  language=Java,
  tabsize=2,
  basewidth=0.55em,
  frame=lines,
  framerule=\heavyrulewidth,
  basicstyle=\scriptsize\ttfamily,
  keywordstyle=\bfseries\color{Maroon},
  stringstyle=\color{Maroon},
  commentstyle=\itshape\color{Green},
  showstringspaces=false,
  aboveskip=8pt,
  belowskip=8pt,
  numbers=left,
  numberstyle=\tiny\color{Black},
  stepnumber=1,
  numbersep=0.5em,
  % xleftmargin=0.5em,
  % xrightmargin=0.5em,
  morecomment=[l]{//},
  escapeinside={(*}{*)},
  captionpos=b,
}

\lstset{literate=%
{Ö}{{\"O}}1 
{Ä}{{\"A}}1 
{Ü}{{\"U}}1 
{ß}{{\ss}}2 
{ü}{{\"u}}1 
{ä}{{\"a}}1 
{ö}{{\"o}}1,
breaklines=true,
postbreak=\raisebox{0ex}[0ex][0ex]{\ensuremath{\hookrightarrow\space}}
}

\lstdefinestyle{XML-style} {
  language=XML,
  morestring=[b]",
  %morestring=[s]{>}{<},
  morecomment=[s]{<?}{?>},
  morecomment=[s]{<!--}{-->},
  stringstyle=\color{black},
  tagstyle=\color{Purple},
  keywordstyle=\color{MediumBlue},
  commentstyle=\color{gray}\slshape,
  morekeywords={xmlns:xsi,xmlns:xsd,xmlns:soap,xmlns,version,type,name,minOccurs,maxOccurs,value,base,
    elementFormDefault,targetNamespace,sex}% list your attributes here
  }
  
  \lstdefinestyle{JSON-style} {
    stringstyle=\color{black},
  }
  
  \lstdefinestyle{XMLX-style} {
    backgroundcolor=\color{white},
    frame=leftline,
    language=XML,
    morestring=[b]",
    %morestring=[s]{>}{<},
    morecomment=[s]{<?}{?>},
    morecomment=[s]{<!--}{-->},
    stringstyle=\color{black},
    tagstyle=\color{Purple},
    keywordstyle=\color{MediumBlue},
    commentstyle=\color{gray}\slshape,
    morekeywords={xmlns:xsi,xmlns:xsd,xmlns:soap,xmlns,version,type,name,minOccurs,maxOccurs,value,base,
      elementFormDefault,targetNamespace,sex},% list your attributes here
      numbers=none
    }
    
    \lstdefinestyle{JSONX-style} {
      backgroundcolor=\color{white},
      frame=leftline,
      stringstyle=\color{black},
      numbers=none
    }


%----------------------------------------------------------
%---- Definitions -----------------------------------------
%----------------------------------------------------------

%---- General definitions ---------------------------------

% Margin notes
\providecommand{\marginline}[1]{\marginpar[\RaggedLeft{#1}]{\RaggedRight #1}}
\newcommand*{\TODO}[1]{\marginline{\scriptsize\textcolor{red}{TODO: #1}}}
%\newcommand*{\TODO}[1]{}

% Style abbreviations
\newcommand*{\ebf}[1]{\emph{\textbf{#1}}}
\newcommand*{\bs}[1]{\boldsymbol{#1}}
\renewcommand*{\_}{\ensuremath{\mathunderscore}\xspace}

% Enumeration
\newcommand*{\st}{\ensuremath{1^{\mbox{\scriptsize st}}}\xspace}
\newcommand*{\nd}{\ensuremath{2^{\mbox{\scriptsize nd}}}\xspace}
\newcommand*{\rd}{\ensuremath{3^{\mbox{\scriptsize rd}}}\xspace}
\newcommand*{\nth}[1]{\ensuremath{#1^{\mbox{\scriptsize th}}}\xspace}

% Arrows
\renewcommand*{\implies}{\ensuremath{\rightarrow}\xspace}
\renewcommand*{\iff}{\ensuremath{\leftrightarrow}\xspace}
\newcommand*{\IF}{\ensuremath{\Rightarrow}\xspace}
\newcommand*{\sra}{\ensuremath{\shortrightarrow}\xspace}
\newcommand*{\sla}{\ensuremath{\shortleftarrow}\xspace}


\newcolumntype{M}[1]{
  >{\RaggedRight\arraybackslash\hspace{0pt}}m{#1}%
}
\newcolumntype{R}[1]{
  >{\begin{turn}{90}\begin{minipage}{#1}%
  \RaggedRight\arraybackslash\hspace{0pt}}l
  <{\end{minipage}\end{turn}}%
}
\newcommand*{\armultirow}[3]{%
  \multicolumn{#1}{#2}{%
    \begin{picture}(0,0)%
    \put(0,0){\begin{tabular}[t]{@{}#2@{}}#3\end{tabular}}%
    \end{picture}%
  }%
}
\makeatletter
\newcolumntype{K}[1]{%
  >{\DC@{.}{.}{#1}}l<{\DC@end}%
}
\makeatother

%---- hyperref --------------------------------------------
% Write Section instead of section for \ref
\addto\extrasenglish{%
  \renewcommand*{\sectionautorefname}{Section}%
  \renewcommand*{\subsectionautorefname}{\sectionautorefname}%
  \renewcommand*{\subsubsectionautorefname}{\sectionautorefname}%
}

\newcommand*{\definitionautorefname}{Definiton}
\newcommand*{\subfigureautorefname}{\figureautorefname}



\usepackage{scrpage2}


\setcounter{tocdepth}{2} % nur 2 Gliederungsebenen im Inhaltsverzeichnis

% ------ Fussnoten
\pagestyle{scrheadings} 

% \foot{\thispublishers ~- \textbf{\thistitleshort}}
% \lofoot{Stand \thisdate ~ \thistime ~- Version \thisversion}

\ifoot{\thispublishers ~-- \textbf{\thistitleshort} \\
Stand \thisdate~\thistime ~-- Version \thisversion
}



\renewcommand*{\chapterpagestyle}{scrheadings}

% ------ Datenmodelle

\newcommand*{\xmlexample}[1]{\lstinputlisting[style=xml-style]{xml/examples/#1.xml}}


%  emph and texttt are automatically index, used textit isntead to prevent it
\let\OldTexttt\texttt
\renewcommand{\texttt}[1]{\OldTexttt{{#1}}\index{#1}}
\let\OldEmph\emph
\renewcommand{\emph}[1]{\OldEmph{{#1}}\index{#1}}

% ------