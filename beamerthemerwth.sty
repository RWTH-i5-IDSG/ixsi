% RWTH Aachen Latex Theme for beamer presentations
%
% http://xtemplate.net/rwth.html
% (c) 2012 by Tobias Pohlen <tobias.pohlen@xtemplate.net>
% Released under the GPL License.
%
% Version 0.2

% \mode<presentation>
\usepackage{pgfcomp-version-0-65}
\usepackage[scaled]{helvet}
% \usepackage{color}
% \usepackage[absolute,overlay]{textpos}
% \usepackage[T1]{fontenc}
% \usepackage[utf8]{inputenc}
% \usepackage[ngerman]{babel}

% Restyle the left margins for the itemize lists
\setlength{\leftmargini}{5mm}

% Define some colors. The colors defined in the corporate identity manual
    \definecolor{RWTHblue}{RGB}{0,83,159}
    \definecolor{RWTHblack}{RGB}{0,0,0}
    \definecolor{RWTHwhite}{RGB}{255,255,255}
    \definecolor{RWTHlightblue}{RGB}{142,186,226}
    \definecolor{RWTHgrey}{RGB}{51,51,51}
    \definecolor{RWTHlightgrey}{RGB}{204,204,204}
    \definecolor{RWTHsuperlightgrey}{RGB}{247,247,247}
    \definecolor{RWTHpetrol}{RGB}{0,97,101}
    \definecolor{RWTHteal}{RGB}{0,152,161}
    \definecolor{RWTHmaygreen}{RGB}{189,205,0}
    \definecolor{RWTHgreen}{RGB}{87,171,39}
    \definecolor{RWTHyellow}{RGB}{255,237,0}
    \definecolor{RWTHorange}{RGB}{246,168,0}
    \definecolor{RWTHmagenta}{RGB}{227,0,102}
    \definecolor{RWTHred}{RGB}{204,7,30}
    \definecolor{RWTHbordeaux}{RGB}{161,16,53}
    \definecolor{RWTHviolet}{RGB}{97,33,88}
    \definecolor{RWTHpurple}{RGB}{122,111,172}

% Assign the colors to the differen pars
    % Title
    \setbeamercolor{title}{fg = RWTHblue}
    % Frame title
    \setbeamercolor{frametitle}{fg = RWTHblue}
    % Table of contents
    \setbeamercolor{section in toc}{fg = RWTHblack}
    \setbeamercolor{subsection in toc}{fg = RWTHblue}
    \setbeamercolor{section in toc shaded}{fg = RWTHblack}
    % List colors (itemize)
    \setbeamercolor{item}{fg = RWTHblue}
    \setbeamercolor{subitem}{fg = RWTHblack}
    \setbeamercolor{subsubitem}{fg = RWTHblack}
    % The color of the bullets points
    \setbeamercolor{description item}{fg = RWTHblue}
    % Captions
    \setbeamercolor{caption}{fg = RWTHblack}
    \setbeamercolor{caption name}{fg = RWTHblack}

    % Style the block elements:
    % - Standard blocks
    % - Alert blocks
    % - Example block
        % Standard block
    \setbeamercolor{block title}{fg = RWTHblue, bg = RWTHlightgrey}
    \setbeamercolor{block body}{fg = RWTHblack, bg = RWTHsuperlightgrey}

    % Alert block
    \setbeamercolor{block title alerted}{fg = RWTHwhite, bg = RWTHgrey}
    \setbeamercolor{block body alerted}{fg = RWTHblack, bg = RWTHsuperlightgrey}
    
    % Example block
    \setbeamercolor{block title example}{fg = RWTHwhite, bg = RWTHblue}
    \setbeamercolor{block body example}{fg = RWTHblack, bg = RWTHsuperlightgrey}
    
    % Normal text
    \setbeamercolor{normal text}{fg = RWTHblack}

% Define the fonts
    % Here we are using default fonts
    \usefonttheme{default}
    % Math elements ought to be rendered in serif-font
    \usefonttheme[onlymath]{serif}
    
    % Fontsize for the presentation title
    \setbeamerfont{title}{size = \huge}
    
    % Fontsize of the frame titles
    \setbeamerfont{frametitle}{size = \Large}

\setbeamersize{text margin left=5mm,text margin right=5mm}

% Draw blue circles around the main section numbers
% \useinnertheme{circles}

% Set the list-style-type of an itemized list to triangles. 
\setbeamertemplate{itemize items}[triangle]

% Remove the circles in an enumerated itemized list
\setbeamertemplate{enumerate items}[default]

\setbeamertemplate{blocks}[default]


% We declare the image that will be used as the logo
\pgfdeclareimage[width = 0.25\paperwidth]{RWTHlogoblue}{graphics/logo.png}

% Remove the navigation symbols since I don't think they are useful at all
\setbeamertemplate{navigation symbols}{}

% This command creates the website like headline with the RWTH logo.
% 
% @param1 The content of the black header bar
% @param1 The content of the light grey bar next to the logo
\newcommand{\RWTHheader}[2]
{
    % I'm using absolute positioning here since it's a lot easier 
    % At the end I use a vspace to emulate the height of the header bar

    % The black box at the top
    \begin{textblock*}{\paperwidth}(0pt,2.5mm)
        \begin{pgfpicture}{0}{0}{0}{0}
            \pgfsetlinewidth{5mm}
            \color{RWTHblack}
            \pgfline{\pgfpoint{0mm}{0mm}}{\pgfpoint{128mm}{0}}
        \end{pgfpicture}
    \end{textblock*}
    % The text in the black box
    \begin{textblock*}{\paperwidth}(42mm, 1.7mm)
        \textbf{\tiny{\textcolor{RWTHlightgrey}{\RWTHremovelinebreaks{#1}}}}
    \end{textblock*}
    % The light grey box
    \begin{textblock*}{\paperwidth}(0mm,12mm)
        \begin{pgfpicture}{0}{0}{0}{0}
            \pgfsetlinewidth{14mm}
            \color{RWTHsuperlightgrey}
            \pgfline{\pgfpoint{0mm}{0mm}}{\pgfpoint{128mm}{0}}
        \end{pgfpicture}
    \end{textblock*}
    % The text in the light grey box
    \begin{textblock*}{\paperwidth}(42mm, 9.5mm)
        #2
    \end{textblock*}
    % The RWTH logo
    \begin{textblock*}{\paperwidth}(5mm,0mm)
        \pgfuseimage{RWTHlogoblue}
    \end{textblock*}
    % The space to emulate the height of the object
    \vspace*{18mm}
}

% This command creates the dark grey footerbar. 
%
% @param1 The content of the bar
\newcommand{\RWTHfooter}[1]
{
    % I'm using absolute positioning to place the box and the text since it's easier for me
    % The dark grey box
    \begin{textblock*}{\paperwidth}(0pt,94mm)
        \begin{pgfpicture}{0}{0}{0}{0}
            \pgfsetlinewidth{5mm}
            \color{RWTHgrey}
            \pgfline{\pgfpoint{0mm}{0mm}}{\pgfpoint{128mm}{0}}
        \end{pgfpicture}
    \end{textblock*}
    % The text in the dark grey box
    \begin{textblock*}{\paperwidth}(5mm,93.2mm)
        \makebox[118mm]{\textbf{\tiny{\textcolor{RWTHlightgrey}{#1}}}}
    \end{textblock*}
    % Space to emulate the height of the box
    \vspace*{6mm}
}

% This command is used to remove the linebreaks from the title to display the title in the header bar
%
% @param1 The string whose linebreaks shall be removed
\newcommand{\RWTHremovelinebreaks}[1]
{
    \begingroup\def\\{ }#1\endgroup
}

% This command creates the title page
\newcommand{\RWTHtitle}
{
    \begin{frame}[plain]
        \titlepage
    \end{frame}
}

% This command shows the table of contents everytime you enter a new subsection
%
% @param1 The title of the frame
\newcommand{\RWTHtoc}[1]
{
    \AtBeginSubsection[]
    {
        \begin{frame}
            % This shouldn't be fixed. 
            \frametitle{#1}
            % Highlight just the current subsection and its parent section
            \tableofcontents[currentsection,currentsubsection]
        \end{frame}
    }
}

% Style the frame title
\setbeamertemplate{frametitle}{
    % Use the previously defined command to create the header bar. 
    % In the 
    \RWTHheader{\insertsection \ - \insertsubsection}{\insertframetitle}
}

% Style the frame footer
\setbeamertemplate{footline}{
    % Use the predefined command
    \RWTHfooter{\thisconference \ | \thispresenter  \ | \thistitle \ | \presentationdate \hfill \insertframenumber \ /  \inserttotalframenumber}
}

% Style the title page
\setbeamertemplate{title page}{
  \RWTHheader{\thisconferencelong}{\Large{\thisconference}}
  \RWTHfooter{\hfill \insertframenumber \ /  \inserttotalframenumber}
    
    % The presentation titlepage
    \begin{center}
        \textcolor{RWTHgrey}{
          \Large{\thistitle} \\
          \bigskip
          \small{\thisauthor} \\
          \smallskip
          \small{\thisaffiliation}\\
          \bigskip
          \normalsize{\presentationdate}
        }
    \end{center}

    
    % Don't remove this line break ^
    
}

\setbeamertemplate{caption}{\insertcaption}             % Only text as caption
\setbeamerfont{caption}{size={\footnotesize}}           % Caption size