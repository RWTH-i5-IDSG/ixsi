\chapter{Nachrichten}
\label{cha:Nachrichten}
Die zwischen den Interaktionspartnern ausgetauschten Nachrichten basieren auf fünf Nachrichtentypen der Art Request / Response und Push. Alle Nachrichten vom RIS an das FVS stellen Anfragen dar und sind daher vom Typ Request. Der Typ Response wird für direkte Antworten des FVS auf Anfragen des RIS verwendet. Um eine Zuordnung der Response-Nachrichten zu den zugehörigen Request-Nachrichten zu erlauben, wird jede Request-Nachricht mit einer eindeutigen Transaction-ID markiert, die in der zugehörigen Response-Nachricht wieder mitgegeben werden muss. Eine Response-Nachricht kann anstelle ihres normalen Inhalts auch einen Fehler enthalten. Der letzte Nachrichtentyp Push findet in den Fällen Verwendung, wenn das RIS fortlaufende Aktualisierungen (Abonnement) FVS angefordert hat. 

\section{Basisnachrichten}
\label{sec:Nachrichten:Basisnachrichten}

\subsection*{Basisklasse}
\input{xml/generated/IxsiMessageType}
\input{xml/generated/IxsiMessageType-schema}

\subsection*{Basisantwort}
\input{xml/generated/AbstractBaseResponseType}
\input{xml/generated/AbstractBaseResponseType-schema}
\medskip

\textit{Eine abstrakte Basisklasse für einen Request ist nicht vorhanden, da nicht erforderlich.}

\subsection*{Transaktionsdaten}
\input{xml/generated/TransactionType}
\input{xml/generated/TransactionType-schema}

\subsection*{Query Request}
\input{xml/generated/QueryRequestType}
\input{xml/generated/QueryRequestType-schema}

\subsection*{Query Response}
\input{xml/generated/QueryResponseType}
\input{xml/generated/QueryResponseType-schema}

\subsection*{Subscription Request}
\input{xml/generated/SubscriptionRequestType}
\input{xml/generated/SubscriptionRequestType-schema}

\subsection*{Subscription Response}
\input{xml/generated/SubscriptionResponseType}
\input{xml/generated/SubscriptionResponseType-schema}

\section{Basisgruppen}
\label{sec:Nachrichten:Basisgruppen}

\subsection*{Benutzer-initiert}
\input{xml/generated/UserTriggeredRequestGroup}
\input{xml/generated/UserTriggeredRequestGroup-schema}
\input{xml/generated/UserTriggeredResponseGroup}
\input{xml/generated/UserTriggeredResponseGroup-schema}

\subsection*{Herkunft/Zielangabe}
\input{xml/generated/OriginDestGroup}
\input{xml/generated/OriginDestGroup-schema}

\subsection*{Gruppen rein zur Organisation}
Anmerkung: Im XML Schema sind weitere Gruppen definiert die jedoch nur der Organisation dienen und keinen Einfluss auf das Nachrichtenformat haben und deshalb hier nicht aufgelistet sind.
\begin{samepage}
\begin{flushleft}
\rowcolors{1}{}{gray!10}
\begin{tabularx}{\linewidth}{l>{\raggedright\arraybackslash}X} 
\toprule
Name &  Kommentar \label{tab:miscGroups}\\
\midrule 
\texttt{StaticDataRequestGroup} & \\
\texttt{StaticDataResponseGroup}& \\
\texttt{SubscriptionAdministrationRequestGroup} & \\
\texttt{SubscriptionAdministrationResponseGroup}& \\
\texttt{SubscriptionRequestGroup} & \\
\texttt{SubscriptionResponseGroup}& \\
\texttt{RequestMessageGroup}& \\
\texttt{ResponseMessageGroup}& \\
\texttt{PushMessageGroup}& \\
\bottomrule 
\end{tabularx}\end{flushleft}\end{samepage}

\section{Dienst 1}
\label{sec:Nachrichten:Dienst1}

\subsection*{Abfrage Buchungsziele}
\label{subsec:Nachrichten:Dienst1:BookingTargets}
\input{xml/generated/BookingTargetsInfoRequestType}
\input{xml/generated/BookingTargetsInfoRequestType-schema}
\input{xml/generated/BookingTargetsInfoResponseType}
\input{xml/generated/BookingTargetsInfoResponseType-schema}

\subsection*{Abfrage Änderungen Buchungszielen}
\label{subsec:Nachrichten:Dienst1:ChangeProviders}
\input{xml/generated/ChangedProvidersRequestType}
\input{xml/generated/ChangedProvidersRequestType-schema}
\input{xml/generated/ChangedProvidersResponseType}
\input{xml/generated/ChangedProvidersResponseType-schema}

\section{Dienst 2}
\label{sec:Nachrichten:Dienst2}

\subsection*{Abfrage Verfügbarkeiten}
\label{subsec:Nachrichten:Dienst2:Availability}
\input{xml/generated/AvailabilityRequestType}
\input{xml/generated/AvailabilityRequestType-schema}
\lstinputlisting[style=XML-style,caption={AvailabilityRequest Beispiel},label=lst:AvailabilityRequestExample]{xml/examples/availability-request.xml}
\medskip
\input{xml/generated/AvailabilityResponseType}
\input{xml/generated/AvailabilityResponseType-schema}
\lstinputlisting[style=XML-style,caption={AvailabilityResponse Beispiel},label=lst:AvailabilityResponseExample]{xml/examples/availability-response.xml}
\medskip


\subsection*{Abfrage Standortkapazitäten (Dienst 2a)}
\label{subsec:Nachrichten:Dienst2:PlaceAvailability}
\input{xml/generated/PlaceAvailabilityRequestType}
\input{xml/generated/PlaceAvailabilityRequestType-schema}
\input{xml/generated/PlaceAvailabilityResponseType}
\input{xml/generated/PlaceAvailabilityResponseType-schema}

\section{Dienst 3}
\label{sec:Nachrichten:Dienst3}

\subsection*{Verfügbarkeitsabonnement}
\label{subsec:Nachrichten:Dienst3:AvailabilitySubscription}
\input{xml/generated/AvailabilitySubscriptionRequestType}
\input{xml/generated/AvailabilitySubscriptionRequestType-schema}
\lstinputlisting[style=XML-style,caption={AvailabilitySubscriptionRequest Beispiel},label=lst:AvailabilitySubscriptionRequestExample]{xml/examples/availability-subscription-request.xml}
\medskip
\input{xml/generated/AvailabilitySubscriptionResponseType}
\input{xml/generated/AvailabilitySubscriptionResponseType-schema}
\input{xml/generated/AvailabilitySubscriptionStatusRequestType}
% \input{xml/generated/AvailabilitySubscriptionStatusRequestType-schema}
\input{xml/generated/AvailabilitySubscriptionStatusResponseType}
% \input{xml/generated/AvailabilitySubscriptionStatusResponseType-schema}
\input{xml/generated/AvailabilityPushMessageType}
\input{xml/generated/AvailabilityPushMessageType-schema}
\lstinputlisting[style=XML-style,caption={AvailabilityPush Beispiel},label=lst:AvailabilitySubscriptionPushExample]{xml/examples/availability-subscription-push.xml}

\subsection*{Vollständige Verfügbarkeitsabonnementinformation}
\label{subsec:Nachrichten:Dienst3:CompleteAvailability}
\input{xml/generated/CompleteAvailabilityRequestType}
\input{xml/generated/CompleteAvailabilityRequestType-schema}
\lstinputlisting[style=XML-style,caption={CompleteAvailabilityRequest Beispiel},label=lst:CompleteAvailabilityRequestExample]{xml/examples/complete-availability-request.xml}
\medskip
\input{xml/generated/CompleteAvailabilityResponseType}
\input{xml/generated/CompleteAvailabilityResponseType-schema}
\lstinputlisting[style=XML-style,caption={CompleteAvailabilityResponse Beispiel},label=lst:CompleteAvailabilityResponseExample]{xml/examples/complete-availability-response.xml}

\subsection*{Standortkapazitätsabonnement (Dienst 3a)}
\label{subsec:Nachrichten:Dienst3:PlaceAvailabilitySubscription}
\input{xml/generated/PlaceAvailabilitySubscriptionRequestType}
\input{xml/generated/PlaceAvailabilitySubscriptionRequestType-schema}
\input{xml/generated/PlaceAvailabilitySubscriptionResponseType}
\input{xml/generated/PlaceAvailabilitySubscriptionResponseType-schema}
\input{xml/generated/PlaceAvailabilitySubscriptionStatusRequestType}
% \input{xml/generated/PlaceAvailabilitySubscriptionStatusRequestType-schema}
\input{xml/generated/PlaceAvailabilitySubscriptionStatusResponseType}
% \input{xml/generated/PlaceAvailabilitySubscriptionStatusResponseType-schema}
\input{xml/generated/PlaceAvailabilityPushMessageType}
\input{xml/generated/PlaceAvailabilityPushMessageType-schema}

\subsection*{Vollständige Standortkapazitätsinformation (Dienst 3a)}
\label{subsec:Nachrichten:Dienst3:CompletePlaceAvailability}
\input{xml/generated/CompletePlaceAvailabilityRequestType}
\input{xml/generated/CompletePlaceAvailabilityRequestType-schema}
\input{xml/generated/CompletePlaceAvailabilityResponseType}
\input{xml/generated/CompletePlaceAvailabilityResponseType-schema}

\section{Dienst 4}
\label{sec:Nachrichten:Dienst4}

\subsection*{Buchung}
\label{subsec:Nachrichten:Dienst4:Booking}
\input{xml/generated/BookingRequestType}
\input{xml/generated/BookingRequestType-schema}
\lstinputlisting[style=XML-style,caption={BookingRequest Beispiel},label=lst:BookingRequestExample]{xml/examples/booking-request.xml}
\medskip
\input{xml/generated/BookingResponseType}
\input{xml/generated/BookingResponseType-schema}
\lstinputlisting[style=XML-style,caption={BookingResponse Beispiel},label=lst:BookingResponseExample]{xml/examples/booking-response.xml}

\subsection*{Buchungsänderung}
\label{subsec:Nachrichten:Dienst4:ChangeBooking}
\input{xml/generated/ChangeBookingRequestType}
\input{xml/generated/ChangeBookingRequestType-schema}
\input{xml/generated/ChangeBookingResponseType}
\input{xml/generated/ChangeBookingResponseType-schema}

\section{Dienst 5}
\label{sec:Nachrichten:Dienst5}

\subsection*{Buchungsabonnement}
\label{subsec:Nachrichten:Dienst5:BookingAlertSubscription}
\input{xml/generated/BookingAlertSubscriptionRequestType}
\input{xml/generated/BookingAlertSubscriptionRequestType-schema}
\input{xml/generated/BookingAlertSubscriptionResponseType}
\input{xml/generated/BookingAlertSubscriptionResponseType-schema}
\input{xml/generated/BookingAlertSubscriptionStatusRequestType}
% \input{xml/generated/BookingAlertSubscriptionStatusRequestType-schema}
\input{xml/generated/BookingAlertSubscriptionStatusResponseType}
% \input{xml/generated/BookingAlertSubscriptionStatusResponseType-schema}
\input{xml/generated/BookingAlertPushMessageType}
\input{xml/generated/BookingAlertPushMessageType-schema}

\subsection*{Vollständige Buchungsabonnementinformation}
\label{subsec:Nachrichten:Dienst5:CompleteBookingAlert}
\input{xml/generated/CompleteBookingAlertRequestType}
\input{xml/generated/CompleteBookingAlertRequestType-schema}
\input{xml/generated/CompleteBookingAlertResponseType}
\input{xml/generated/CompleteBookingAlertResponseType-schema}

\section{Dienst 6}
\label{sec:Nachrichten:Dienst6}

\subsection*{Preisinformation}
\label{subsec:Nachrichten:Dienst6:PriceInformation}
\input{xml/generated/PriceInformationRequestType}
\input{xml/generated/PriceInformationRequestType-schema}
\input{xml/generated/PriceInformationResponseType}
\input{xml/generated/PriceInformationResponseType-schema}

\section{Dienst 7}
\label{sec:Nachrichten:Dienst7}

\subsection*{Nutzungsdatenabonnement}
\label{subsec:Nachrichten:Dienst7:ConsumptionSubscription}
\input{xml/generated/ConsumptionSubscriptionRequestType}
\input{xml/generated/ConsumptionSubscriptionRequestType-schema}
\input{xml/generated/ConsumptionSubscriptionResponseType}
\input{xml/generated/ConsumptionSubscriptionResponseType-schema}
\input{xml/generated/ConsumptionSubscriptionStatusRequestType}
% \input{xml/generated/ConsumptionSubscriptionStatusRequestType-schema}
\input{xml/generated/ConsumptionSubscriptionStatusResponseType}
% \input{xml/generated/ConsumptionSubscriptionStatusResponseType-schema}
\input{xml/generated/ConsumptionPushMessageType}
\input{xml/generated/ConsumptionPushMessageType-schema}

\subsection*{Vollständige Nutzungsdaten}
\label{subsec:Nachrichten:Dienst5:CompleteConsumption}
\input{xml/generated/CompleteConsumptionRequestType}
\input{xml/generated/CompleteConsumptionRequestType-schema}
\input{xml/generated/CompleteConsumptionResponseType}
\input{xml/generated/CompleteConsumptionResponseType-schema}


\section{Dienst 8}
\label{sec:Nachrichten:Dienst8}

\subsection*{Fahrzeugfreischaltung}
\label{subsec:Nachrichten:Dienst8:BookingUnlock}
\input{xml/generated/BookingUnlockRequestType}
\input{xml/generated/BookingUnlockRequestType-schema}
\input{xml/generated/BookingUnlockResponseType}
\input{xml/generated/BookingUnlockResponseType-schema}

\section{Dienst A}
\label{sec:Nachrichten:DienstA}

\subsection*{Session öffnen}
\label{subsec:Nachrichten:DienstA:OpenSession}
\input{xml/generated/OpenSessionRequestType}
\input{xml/generated/OpenSessionRequestType-schema}
\input{xml/generated/OpenSessionResponseType}
\input{xml/generated/OpenSessionResponseType-schema}

\subsection*{Session schließen}
\label{subsec:Nachrichten:DienstA:CloseSession}
\input{xml/generated/CloseSessionRequestType}
\input{xml/generated/CloseSessionRequestType-schema}
\input{xml/generated/CloseSessionResponseType}
\input{xml/generated/CloseSessionResponseType-schema}

\section{Dienst B}
\label{sec:Nachrichten:DienstB}

\subsection*{Heartbeat}
\label{subsec:Nachrichten:DienstB:HeartBeat}
\input{xml/generated/HeartBeatRequestType}
\input{xml/generated/HeartBeatRequestType-schema}
\input{xml/generated/HeartBeatResponseType}
\input{xml/generated/HeartBeatResponseType-schema}

\section{Dienst C}
\label{sec:Nachrichten:DienstC}

\subsection*{Tokengenerierung}
\label{subsec:Nachrichten:DienstC:Tokengenerierung}
\input{xml/generated/TokenGenerationRequestType}
\input{xml/generated/TokenGenerationRequestType-schema}
\input{xml/generated/TokenGenerationResponseType}
\input{xml/generated/TokenGenerationResponseType-schema}
