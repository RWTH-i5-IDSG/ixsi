\chapter{Messages}
\label{cha:Nachrichten}
The messages that are transferred between the interaction partners are based upon five message types the way request / response and push. All messages going from TIS to VRS represent requests. The type response is used for direct responses of the VRS of requests, coming from the TIS. To allow an allocation of response-messages to the corresponding request-messages, every request-message is marked by a unique transaction-ID, which has to be delivered within the corresponding response-message. Instead of its' usual content, a response-message can also contain errors. The last message type push is used in that cases, where the TIS demanded for ongoing updates (subscriptions) towards the VRS.

For some messages, examples for illustration purposes are available, see \cref{lst:AvailabilityRequestExample}.

\section{Base Messages}
\label{sec:Nachrichten:Basisnachrichten}

\subsection*{Base Class}
\input{xml/generated/IxsiMessageType}
\input{xml/generated/IxsiMessageType-schema}

\subsection*{Base Response}
\input{xml/generated/AbstractBaseResponseType}
\input{xml/generated/AbstractBaseResponseType-schema}
\medskip

\textit{A abstract base class for a request does not exist, because it is not necessary.}

\subsection*{Transaction Data}
\input{xml/generated/TransactionType}
\input{xml/generated/TransactionType-schema}

\subsection*{Query Request}
\input{xml/generated/QueryRequestType}
\input{xml/generated/QueryRequestType-schema}

\subsection*{Query Response}
\input{xml/generated/QueryResponseType}
\input{xml/generated/QueryResponseType-schema}

\subsection*{Subscription Request}
\input{xml/generated/SubscriptionRequestType}
\input{xml/generated/SubscriptionRequestType-schema}

\subsection*{Subscription Response}
\input{xml/generated/SubscriptionResponseType}
\input{xml/generated/SubscriptionResponseType-schema}

\section{Base Groups}
\label{sec:Nachrichten:Basisgruppen}

\subsection*{User-Initiated}
\input{xml/generated/UserTriggeredRequestGroup}
\input{xml/generated/UserTriggeredRequestGroup-schema}
\input{xml/generated/UserTriggeredResponseGroup}
\input{xml/generated/UserTriggeredResponseGroup-schema}

\subsection*{Origin/Target Specification}
\input{xml/generated/OriginDestGroup}
\input{xml/generated/OriginDestGroup-schema}

\subsection*{Groups solely for Organisation Purposes}
Anmerkung: Im XML Schema sind weitere Gruppen definiert, die jedoch nur der Organisation dienen und keinen Einfluss auf das Nachrichtenformat haben und deshalb hier nicht aufgelistet sind.
\begin{samepage}
\begin{flushleft}
\rowcolors{1}{}{gray!10}
\begin{tabularx}{\linewidth}{l>{\raggedright\arraybackslash}X}
\toprule
Name &  Comment \label{tab:miscGroups}\\
\midrule
\texttt{StaticDataRequestGroup} & \\
\texttt{StaticDataResponseGroup}& \\
\texttt{SubscriptionAdministrationRequestGroup} & \\
\texttt{SubscriptionAdministrationResponseGroup}& \\
\texttt{SubscriptionRequestGroup} & \\
\texttt{SubscriptionResponseGroup}& \\
\texttt{RequestMessageGroup}& \\
\texttt{ResponseMessageGroup}& \\
\texttt{PushMessageGroup}& \\
\bottomrule
\end{tabularx}\end{flushleft}\end{samepage}

\section{Service A - Sessions}
\label{sec:Nachrichten:DienstA}

\subsection*{Open Session}
\label{subsec:Nachrichten:DienstA:OpenSession}
\input{xml/generated/OpenSessionRequestType}
\input{xml/generated/OpenSessionRequestType-schema}
\input{xml/generated/OpenSessionResponseType}
\input{xml/generated/OpenSessionResponseType-schema}

\subsection*{Close Session}
\label{subsec:Nachrichten:DienstA:CloseSession}
\input{xml/generated/CloseSessionRequestType}
\input{xml/generated/CloseSessionRequestType-schema}
\input{xml/generated/CloseSessionResponseType}
\input{xml/generated/CloseSessionResponseType-schema}

\section{Service B - Subscriptions}
\label{sec:Nachrichten:DienstB}

\subsection*{Heartbeat}
\label{subsec:Nachrichten:DienstB:HeartBeat}
\input{xml/generated/HeartBeatRequestType}
\input{xml/generated/HeartBeatRequestType-schema}
\input{xml/generated/HeartBeatResponseType}
\input{xml/generated/HeartBeatResponseType-schema}

\section{Service C - Tokens}
\label{sec:Nachrichten:DienstC}

\subsection*{Token Generation}
\label{subsec:Nachrichten:DienstC:Tokengenerierung}
\input{xml/generated/TokenGenerationRequestType}
\input{xml/generated/TokenGenerationRequestType-schema}
\input{xml/generated/TokenGenerationResponseType}
\input{xml/generated/TokenGenerationResponseType-schema}

\section{Service 1 - Statistical Data}
\label{sec:Nachrichten:Dienst1}

\subsection*{Request Booking Targets}
\label{subsec:Nachrichten:Dienst1:BookingTargets}
\input{xml/generated/BookingTargetsInfoRequestType}
\input{xml/generated/BookingTargetsInfoRequestType-schema}
\input{xml/generated/BookingTargetsInfoResponseType}
\input{xml/generated/BookingTargetsInfoResponseType-schema}

\subsection*{Request Change Booking Targets}
\label{subsec:Nachrichten:Dienst1:ChangeProviders}
\input{xml/generated/ChangedProvidersRequestType}
\input{xml/generated/ChangedProvidersRequestType-schema}
\input{xml/generated/ChangedProvidersResponseType}
\input{xml/generated/ChangedProvidersResponseType-schema}

\section{Service 2 - Availability Information}
\label{sec:Nachrichten:Dienst2}

\subsection*{Request Availabilities}
\label{subsec:Nachrichten:Dienst2:Availability}
\input{xml/generated/AvailabilityRequestType}
\input{xml/generated/AvailabilityRequestType-schema}
\lstinputlisting[style=XML-style,caption={AvailabilityRequest Beispiel},label=lst:AvailabilityRequestExample]{xml/examples/availability-request.xml}
\medskip
\input{xml/generated/AvailabilityResponseType}
\input{xml/generated/AvailabilityResponseType-schema}
\lstinputlisting[style=XML-style,caption={AvailabilityResponse Beispiel},label=lst:AvailabilityResponseExample]{xml/examples/availability-response.xml}
\medskip


\subsection*{Request Location Capacities (Service 2a)}
\label{subsec:Nachrichten:Dienst2:PlaceAvailability}
\input{xml/generated/PlaceAvailabilityRequestType}
\input{xml/generated/PlaceAvailabilityRequestType-schema}
\input{xml/generated/PlaceAvailabilityResponseType}
\input{xml/generated/PlaceAvailabilityResponseType-schema}

\section{Service 3 - Availability Subscription}
\label{sec:Nachrichten:Dienst3}

\subsection*{Availability Subscription}
\label{subsec:Nachrichten:Dienst3:AvailabilitySubscription}
\input{xml/generated/AvailabilitySubscriptionRequestType}
\input{xml/generated/AvailabilitySubscriptionRequestType-schema}
\lstinputlisting[style=XML-style,caption={AvailabilitySubscriptionRequest Beispiel},label=lst:AvailabilitySubscriptionRequestExample]{xml/examples/availability-subscription-request.xml}
\medskip
\input{xml/generated/AvailabilitySubscriptionResponseType}
\input{xml/generated/AvailabilitySubscriptionResponseType-schema}
\input{xml/generated/AvailabilitySubscriptionStatusRequestType}
% \input{xml/generated/AvailabilitySubscriptionStatusRequestType-schema}
\input{xml/generated/AvailabilitySubscriptionStatusResponseType}
% \input{xml/generated/AvailabilitySubscriptionStatusResponseType-schema}
\input{xml/generated/AvailabilityPushMessageType}
\input{xml/generated/AvailabilityPushMessageType-schema}
\lstinputlisting[style=XML-style,caption={AvailabilityPush Beispiel},label=lst:AvailabilitySubscriptionPushExample]{xml/examples/availability-subscription-push.xml}

\subsection*{Complete Availability Subscription Information}
\label{subsec:Nachrichten:Dienst3:CompleteAvailability}
\input{xml/generated/CompleteAvailabilityRequestType}
\input{xml/generated/CompleteAvailabilityRequestType-schema}
\lstinputlisting[style=XML-style,caption={CompleteAvailabilityRequest Beispiel},label=lst:CompleteAvailabilityRequestExample]{xml/examples/complete-availability-request.xml}
\medskip
\input{xml/generated/CompleteAvailabilityResponseType}
\input{xml/generated/CompleteAvailabilityResponseType-schema}
\lstinputlisting[style=XML-style,caption={CompleteAvailabilityResponse Beispiel},label=lst:CompleteAvailabilityResponseExample]{xml/examples/complete-availability-response.xml}

\subsection*{Location Capacity Subscription (Service 3a)}
\label{subsec:Nachrichten:Dienst3:PlaceAvailabilitySubscription}
\input{xml/generated/PlaceAvailabilitySubscriptionRequestType}
\input{xml/generated/PlaceAvailabilitySubscriptionRequestType-schema}
\input{xml/generated/PlaceAvailabilitySubscriptionResponseType}
\input{xml/generated/PlaceAvailabilitySubscriptionResponseType-schema}
\input{xml/generated/PlaceAvailabilitySubscriptionStatusRequestType}
% \input{xml/generated/PlaceAvailabilitySubscriptionStatusRequestType-schema}
\input{xml/generated/PlaceAvailabilitySubscriptionStatusResponseType}
% \input{xml/generated/PlaceAvailabilitySubscriptionStatusResponseType-schema}
\input{xml/generated/PlaceAvailabilityPushMessageType}
\input{xml/generated/PlaceAvailabilityPushMessageType-schema}

\subsection*{Complete Location Capacity Information (Service 3a)}
\label{subsec:Nachrichten:Dienst3:CompletePlaceAvailability}
\input{xml/generated/CompletePlaceAvailabilityRequestType}
\input{xml/generated/CompletePlaceAvailabilityRequestType-schema}
\input{xml/generated/CompletePlaceAvailabilityResponseType}
\input{xml/generated/CompletePlaceAvailabilityResponseType-schema}

\section{Service 4 - Booking / Booking Change}
\label{sec:Nachrichten:Dienst4}

\subsection*{Booking}
\label{subsec:Nachrichten:Dienst4:Booking}
\input{xml/generated/BookingRequestType}
\input{xml/generated/BookingRequestType-schema}
\lstinputlisting[style=XML-style,caption={BookingRequest Beispiel},label=lst:BookingRequestExample]{xml/examples/booking-request.xml}
\medskip
\input{xml/generated/BookingResponseType}
\input{xml/generated/BookingResponseType-schema}
\lstinputlisting[style=XML-style,caption={BookingResponse Beispiel},label=lst:BookingResponseExample]{xml/examples/booking-response.xml}

\subsection*{Booking Change}
\label{subsec:Nachrichten:Dienst4:ChangeBooking}
\input{xml/generated/ChangeBookingRequestType}
\input{xml/generated/ChangeBookingRequestType-schema}
\input{xml/generated/ChangeBookingResponseType}
\input{xml/generated/ChangeBookingResponseType-schema}


\subsection*{Request External Bookings (Service 4a)}
\label{subsec:Nachrichten:Dienst4:externalBookingRequestType}
\input{xml/generated/ExternalBookingSubscriptionRequestType}
\input{xml/generated/ExternalBookingSubscriptionRequestType-schema}
\input{xml/generated/ExternalBookingSubscriptionResponseType}
\input{xml/generated/ExternalBookingSubscriptionResponseType-schema}
\input{xml/generated/ExternalBookingSubscriptionStatusRequestType}
% \input{xml/generated/ExternalBookingSubscriptionStatusRequestType-schema}
\input{xml/generated/ExternalBookingSubscriptionStatusResponseType}
% \input{xml/generated/ExternalBookingSubscriptionStatusResponseType-schema}
\input{xml/generated/ExternalBookingPushMessageType}
\input{xml/generated/ExternalBookingPushMessageType-schema}
\input{xml/generated/CompleteExternalBookingRequestType}
\input{xml/generated/CompleteExternalBookingRequestType-schema}
\input{xml/generated/CompleteExternalBookingResponseType}
\input{xml/generated/CompleteExternalBookingResponseType-schema}

\section{Service 5 - Booking Subscription}
\label{sec:Nachrichten:Dienst5}

\subsection*{Booking Subscription}
\label{subsec:Nachrichten:Dienst5:BookingAlertSubscription}
\input{xml/generated/BookingAlertSubscriptionRequestType}
\input{xml/generated/BookingAlertSubscriptionRequestType-schema}
\input{xml/generated/BookingAlertSubscriptionResponseType}
\input{xml/generated/BookingAlertSubscriptionResponseType-schema}
\input{xml/generated/BookingAlertSubscriptionStatusRequestType}
% \input{xml/generated/BookingAlertSubscriptionStatusRequestType-schema}
\input{xml/generated/BookingAlertSubscriptionStatusResponseType}
% \input{xml/generated/BookingAlertSubscriptionStatusResponseType-schema}
\input{xml/generated/BookingAlertPushMessageType}
\input{xml/generated/BookingAlertPushMessageType-schema}

\subsection*{Complete Booking Subscription Information}
\label{subsec:Nachrichten:Dienst5:CompleteBookingAlert}
\input{xml/generated/CompleteBookingAlertRequestType}
\input{xml/generated/CompleteBookingAlertRequestType-schema}
\input{xml/generated/CompleteBookingAlertResponseType}
\input{xml/generated/CompleteBookingAlertResponseType-schema}

\section{Service 6 - Price Inquiry}
\label{sec:Nachrichten:Dienst6}

\subsection*{Price Information}
\label{subsec:Nachrichten:Dienst6:PriceInformation}
\input{xml/generated/PriceInformationRequestType}
\input{xml/generated/PriceInformationRequestType-schema}
\input{xml/generated/PriceInformationResponseType}
\input{xml/generated/PriceInformationResponseType-schema}

\section{Service 7 - Consumption Data Subscription}
\label{sec:Nachrichten:Dienst7}

\subsection*{Consumption Data Subscription}
\label{subsec:Nachrichten:Dienst7:ConsumptionSubscription}
\input{xml/generated/ConsumptionSubscriptionRequestType}
\input{xml/generated/ConsumptionSubscriptionRequestType-schema}
\input{xml/generated/ConsumptionSubscriptionResponseType}
\input{xml/generated/ConsumptionSubscriptionResponseType-schema}
\input{xml/generated/ConsumptionSubscriptionStatusRequestType}
\input{xml/generated/ConsumptionSubscriptionStatusResponseType}
\input{xml/generated/ConsumptionPushMessageType}
\input{xml/generated/ConsumptionPushMessageType-schema}

\subsection*{Complete Consumption Data}
\label{subsec:Nachrichten:Dienst5:CompleteConsumption}
\input{xml/generated/CompleteConsumptionRequestType}
\input{xml/generated/CompleteConsumptionRequestType-schema}
\input{xml/generated/CompleteConsumptionResponseType}
\input{xml/generated/CompleteConsumptionResponseType-schema}


\section{Service 8 - Change Booking Status}
\label{sec:Nachrichten:Dienst8}
\input{xml/generated/ChangeBookingStateRequestType}
\input{xml/generated/ChangeBookingStateRequestType-schema}
\input{xml/generated/ChangeBookingStateResponseType}
\input{xml/generated/ChangeBookingStateResponseType-schema}

\section{Service 9 - User Management}
\label{sec:Nachrichten:Dienst9}

\subsection*{Create User}
\label{subsec:Nachrichten:Dienst9:CreateUser}
\input{xml/generated/CreateUserRequestType}
\input{xml/generated/CreateUserRequestType-schema}
\input{xml/generated/CreateUserResponseType}
\input{xml/generated/CreateUserResponseType-schema}

\subsection*{Change User}
\label{subsec:Nachrichten:Dienst9:ChangeUser}
\input{xml/generated/ChangeUserRequestType}
\input{xml/generated/ChangeUserRequestType-schema}
\input{xml/generated/ChangeUserResponseType}
\input{xml/generated/ChangeUserResponseType-schema}


\section{Service 10 - Vehicle Settings Management}
\label{sec:Nachrichten:Dienst10}

\subsection*{Set Vehicle Settings}
\label{subsec:Nachrichten:Dienst10:SetBookingSettings}
\input{xml/generated/SetBookingSettingsRequestType}
\input{xml/generated/SetBookingSettingsRequestType-schema}
\input{xml/generated/SetBookingSettingsResponseType}
\input{xml/generated/SetBookingSettingsResponseType-schema}

\subsection*{Subscribe to Vehicle Settings}
\label{subsec:Nachrichten:Dienst10:BookingSettingsSubscription}
\input{xml/generated/BookingSettingsSubscriptionRequestType}
\input{xml/generated/BookingSettingsSubscriptionRequestType-schema}
\input{xml/generated/BookingSettingsSubscriptionResponseType}
\input{xml/generated/BookingSettingsSubscriptionResponseType-schema}
\input{xml/generated/BookingSettingsSubscriptionStatusRequestType}
\input{xml/generated/BookingSettingsSubscriptionStatusResponseType}
\input{xml/generated/CompleteBookingSettingsRequestType}
\input{xml/generated/CompleteBookingSettingsRequestType-schema}
\input{xml/generated/CompleteBookingSettingsResponseType}
\input{xml/generated/CompleteBookingSettingsResponseType-schema}
\input{xml/generated/BookingSettingsPushMessageType}
\input{xml/generated/BookingSettingsPushMessageType-schema}


\section{Service 11 - Remote Configuration Navigation System and Journey Progress Monitoring}
\label{sec:Nachrichten:Dienst11}

\subsection*{Set Target Location of Navigation System}
\label{subsec:Nachrichten:Dienst11:SetNavigationDestination}
\input{xml/generated/SetNavigationDestinationRequestType}
\input{xml/generated/SetNavigationDestinationRequestType-schema}
\input{xml/generated/SetNavigationDestinationResponseType}
\input{xml/generated/SetNavigationDestinationResponseType-schema}

\subsection*{Journey Progress (Booking Progress) Monitoring}
\label{subsec:Nachrichten:Dienst11:BookingProgressSubscription}
\input{xml/generated/BookingProgressSubscriptionRequestType}
\input{xml/generated/BookingProgressSubscriptionRequestType-schema}
\input{xml/generated/BookingProgressSubscriptionResponseType}
\input{xml/generated/BookingProgressSubscriptionResponseType-schema}
\input{xml/generated/BookingProgressSubscriptionStatusRequestType}
\input{xml/generated/BookingProgressSubscriptionStatusResponseType}
\input{xml/generated/CompleteBookingProgressRequestType}
\input{xml/generated/CompleteBookingProgressRequestType-schema}
\input{xml/generated/CompleteBookingProgressResponseType}
\input{xml/generated/CompleteBookingProgressResponseType-schema}
\input{xml/generated/BookingProgressPushMessageType}
\input{xml/generated/BookingProgressPushMessageType-schema}
