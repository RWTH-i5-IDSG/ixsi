\chapter{Interaktionsprotokolle}
\label{sec:Interaktionsprotokolle}

\section{Dienst 1 -- Statische Daten}


\subsection{Abfrage Buchungsziele}

\begin{center}
\begin{sequencediagram}
\newthread{ris}{:RIS}
\newinst[7]{fvs}{:FVS}

\begin{sdblock}{BookingTargetsInfo}{}

\begin{call}{ris}{BookingTargetsInfoRequest(ProviderID*)}{fvs}{BookingTargetsInfos}

\end{call}

\end{sdblock}

\end{sequencediagram}\\
\hfill\emph{* optional}
\end{center}


\smallskip
Als Basis für die Informationskopplung dient der Austausch von sogenannten Buchungszielen. Buchungsziele sind eine logische Repräsentation von einem oder mehreren Fahrzeugen mit gemeinsamen Eingeschaften, wie z.B. vom gleichen Anbieter bereitgestellt, gleicher Fahrzeugtyp, gleiche Verleihstation. Diese Eigenschaften sind statisch. Um nur Informationen zu Buchungszielen eines bestimmten Anbieters zu erhalten kann nach \texttt{ProviderID} gefiltert werden.

\subsection{Abfrage Änderungen Buchungszielen}

\begin{center}
\begin{sequencediagram}
\newthread{ris}{:RIS}
\newinst[7]{fvs}{:FVS}

\begin{sdblock}{ChangedProviders}{}

\begin{call}{ris}{ChangedProvidersRequest}{fvs}{ChangedProvidersIDs}
\end{call}

% \begin{messcall}{ris}{Asynchrone Nachricht}{fvs}
% \end{messcall}

\end{sdblock}
\end{sequencediagram}
\end{center}

Um nichtintervallweise alle Buchungszielinformationen übertragen zu müssen kann mit dem Aufruf \texttt{ChangedProviders} angefragt werden bei welchem Anbieter sich Änderungen seit einem bestimmten Zeitpunkt, vorgegeben durch den Parameter \texttt{timestamp}, ergeben haben. Rückgegeben wird eine \texttt{ProviderID} die wiederum bei \texttt{BookingTargetsInfo} als Parameter übergeben werden kann.

\section{Dienst 2 -- Verfügbarkeitsauskunft (availability query) }

\subsection{Abfrage Verfügbarkeit}

\begin{center}
\begin{sequencediagram}
\newthread{ris}{:RIS}
\newinst[7]{fvs}{:FVS}

\begin{sdblock}{BookingTargetsInfo}{}

\begin{call}{ris}{BookingTargetID, TimePeriod}{fvs}{BookingTargetList}
\end{call}

\end{sdblock}

\end{sequencediagram}
\end{center}

